<!doctype html>
<HTML>
<head>
    <title>Currency Convetor</title>
</head>
<html>
<body>
    <h1>Currency Converter</h1>
    <p> Select Currency and enter Amount to convert.</p>
    <form>
        <select id="from">
            <option value="TWD">TWD</option>
        </select>
        <label>To:</label>
        <select id="to">
            <option value="USD">USD</option>
            <option value="EUR">EUR</option>
            <option value="JPY">JPY</option>
            <option value="KRW">KRW</option>
            <option value="AUD">AUD</option>
        </select>
        <label>Amount:</label>
        <input type="text" id="amount" />
        
        <button type="reset">Reset</button> // (4) reset button
        
        <button type="button" id="convert">Convert</button>
        <p id="result"></p>
        <p id="error" style="color: red; display: none;"></p>
    </form>
    <script>
        const convert = document.getElementById("convert");
        const result = document.getElementById("result");
        const from = document.getElementById("from");
        const to = document.getElementById("to");
        const amount = document.getElementById("amount");
        const error = document.getElementById("error");
       
        convert.addEventListener("click", function() {
            let fromCurrency = from.value;
            let toCurrency = to.value;
            let amt = amount.value;
            
             // (2) Load XML file
            const xmlFile = 'currency-rates.xml';
            const parser = new DOMParser();
            let xmlDoc;
            
            // (5) input checkout and reset
            if (isNaN(amt) || amt.trim() === "") {
                error.textContent = "Invalid Input! Please enter valid input.";
                error.style.display = "block";
                amount.value = ""; // Reset the input
                return;
            }
            
            fetch(`https://api.exchangerate-api.com/v4/latest/${fromCurrency}`)
            
            .then(response => {
                return response.json();
            })
            
            .then(data => {
                let rate = data.rates[toCurrency];
                let total = rate * amt;
                result.innerHTML = `${amt} ${fromCurrency} = ${total}
                ${toCurrency}`;
            });
            
        });
    </script>
</body>
</html>